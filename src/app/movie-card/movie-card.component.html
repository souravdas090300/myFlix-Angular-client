<div class="main-page">
  <!-- Modern Navigation Bar -->
  <mat-toolbar color="primary" class="modern-navbar">
    <span class="brand-title">myFlix</span>
    <span class="spacer"></span>
    <button mat-button routerLink="/profile" class="nav-btn">
      <mat-icon>person</mat-icon>
      <span class="button-text">Profile</span>
    </button>
    <button mat-button (click)="logout()" class="nav-btn logout-btn">
      <mat-icon>logout</mat-icon>
      <span class="button-text">Logout</span>
    </button>
  </mat-toolbar>

  <!-- Movie Cards Display -->
  <div class="movies-container">
    <div *ngIf="isLoading" class="loading-container">
      <mat-progress-spinner diameter="50"></mat-progress-spinner>
      <p>Loading movies...</p>
    </div>
    
    <div *ngIf="!isLoading && movies.length === 0" class="no-movies-container">
      <mat-icon class="no-movies-icon">theaters</mat-icon>
      <p>No movies found. Please make sure you're logged in.</p>
    </div>
    
    <div class="movie-grid" *ngIf="!isLoading && movies.length > 0">
      <mat-card *ngFor="let movie of movies" class="movie-card">
        <mat-card-header>
          <mat-card-title>{{movie.Title}}</mat-card-title>
          <mat-card-subtitle>Directed by: {{movie.Director?.Name || 'Unknown Director'}}</mat-card-subtitle>
        </mat-card-header>
        <img 
          [src]="movie.ImagePath" 
          [alt]="movie.Title" 
          class="movie-image" />
        <mat-card-actions>
          <div class="action-buttons-row">
            <button
              mat-button
              color="primary"
              (click)="openGenreDialog(movie.Genre)">
              Genre
            </button>
            <button
              mat-button
              color="primary"
              (click)="openDirectorDialog(movie.Director)">
              Director
            </button>
            <button
              mat-button
              color="primary"
              (click)="openSynopsisDialog(movie)">
              Synopsis
            </button>
          </div>
          <div class="favorite-row">
            <mat-icon 
              [class.favorite-active]="isFavorite(movie._id)"
              (click)="toggleFavorite(movie)"
              class="favorite-icon"
              title="{{ isFavorite(movie._id) ? 'Remove from favorites' : 'Add to favorites' }}">
              {{ isFavorite(movie._id) ? 'favorite' : 'favorite_border' }}
            </mat-icon>
          </div>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>