<!-- Navigation Bar -->
<div style="padding: 20px; background-color: #3f51b5; color: white; margin-bottom: 20px;">
  <div style="display: flex; justify-content: space-between; align-items: center;">
    <h2 style="margin: 0; color: white;">Movie Collection</h2>
    <div>
      <button mat-raised-button color="accent" routerLink="/profile" style="margin-right: 10px;">
        My Profile
      </button>
      <button mat-raised-button color="warn" (click)="logOut()">
        Logout
      </button>
    </div>
  </div>
</div>

<!-- Loading State -->
<div *ngIf="isLoading" style="text-align: center; padding: 40px;">
  <mat-spinner></mat-spinner>
  <p style="margin-top: 20px;">Loading movies...</p>
</div>

<!-- No Movies Message -->
<div *ngIf="!isLoading && movies.length === 0" style="text-align: center; padding: 40px;">
  <mat-icon style="font-size: 48px; color: #666;">movie</mat-icon>
  <h3>No movies available</h3>
  <p>Please check your connection or try logging in again.</p>
  <button mat-raised-button color="primary" (click)="getMovies()">Retry</button>
</div>

<!-- Movies Display -->
<div *ngIf="!isLoading && movies.length > 0" style="display: flex; flex-wrap: wrap; gap: 20px; padding: 20px;">
    <mat-card *ngFor="let movie of movies;" style="flex: 1 1 300px; max-width: 400px;">
        <mat-card-header>
        <mat-card-title>{{movie.Title}}</mat-card-title>
            <mat-card-subtitle>Directed by: {{movie.Director?.Name || 'Unknown Director'}}</mat-card-subtitle>
        </mat-card-header>
        <img [src]="movie.ImagePath" [alt]="movie.Title" style="width: 100%; height: 300px; object-fit: cover;" />
        <mat-card-actions>
            <button
                mat-button
                color="primary"
                (click)="openGenreDialog(movie.Genre?.Name, movie.Genre?.Description)"
                [disabled]="!movie.Genre?.Name"
            >
                Genre
            </button>
            <button
                mat-button
                color="primary"
                (click)="openDirectorDialog(movie.Director?.Name, movie.Director?.Bio, movie.Director?.Birth, movie.Director?.Death)"
                [disabled]="!movie.Director?.Name"
            >
                Director
            </button>
            <button
                mat-button
                color="primary"
                (click)="openMovieDetailsDialog(movie)"
            >
                Synopsis
            </button>
            <mat-icon (click)="addToFavorites(movie._id)" style="cursor: pointer;">favorite_border</mat-icon>
        </mat-card-actions>
    </mat-card>
</div>
